pipeline {
    agent any
    stages{
      stage('Mavan') {
            steps {
                 sh "mvn clean package"
            }
        }
        stage('Docker Build') {    
            steps {
                 sh "docker build -t gmtjdk/hiring:0.0.3 ."
            }
        }
        stage('Docker push'){
               steps {
                       withCredentials([string(credentialsId: 'Docker-hub', variable: 'hubpwd')]) 
                       {
                        sh "docker login -u gmtjdk -p ${hubpwd}"
                        sh "docker push gmtjdk/hiring:0.0.3"
                       }
                    }
              }
       }  
  }

    
